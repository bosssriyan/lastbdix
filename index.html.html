<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PAID IPTV BD</title>
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Orbitron:wght@600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --yellow: #FFD700;
            --bg: #1a1a00;
            --panel: rgba(30,30,0,0.98);
            --border: 1px solid var(--yellow);
        }
        * {
            margin:0;
            padding:0;
            box-sizing:border-box;
            font-family:'VT323', monospace;
            text-transform:uppercase;
            user-select:none;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            background:var(--bg);
            color:var(--yellow);
            height:100vh;
            display:flex;
            flex-direction:column;
            overflow:hidden;
        }

        /* HEADER */
        header {
            flex-shrink: 0;
            padding:10px 15px;
            display:flex;
            justify-content:space-between;
            align-items:center;
            border-bottom:1px solid var(--yellow);
            background:#111100;
            z-index:100;
        }
        .logo {
            font-family:'Orbitron';
            font-size:22px;
            letter-spacing:1px;
            text-shadow:0 0 10px var(--yellow);
            cursor:pointer;
        }
        .search-wrap {
            position:relative;
        }
        .search {
            background:#222200;
            border:1px solid var(--yellow);
            color:var(--yellow);
            padding:5px 10px;
            width:150px;
            font-size:16px;
            outline:none;
            border-radius:4px;
            transition:0.3s;
        }
        .search:focus {
            box-shadow:0 0 10px var(--yellow);
            width:180px;
        }

        /* CONTAINER */
        .container {
            flex:1;
            display:grid;
            grid-template-columns:3fr 1.2fr;
            gap:15px;
            padding:15px;
            overflow:hidden;
            max-width:1600px;
            margin:0 auto;
            width:100%;
        }

        /* PLAYER SECTION */
        .player-wrap {
            display:flex;
            flex-direction:column;
            border:1px solid var(--yellow);
            background:#000;
            overflow:hidden;
            height:100%;
        }
        .video-container {
            position:relative;
            width:100%;
            background:#000;
            flex-shrink:0;
        }
        .aspect-ratio {
            padding-top: 56.25%;
            position: relative;
        }
        .video-js {
            position:absolute;
            top:0;
            left:0;
            width:100%;
            height:100%;
            font-family:'VT323';
            color:var(--yellow);
        }
        .vjs-error-display {
            color: #ff9900 !important;
            font-family: 'Orbitron';
            font-size: 16px;
            background: #000;
        }

        .info-bar {
            padding:10px;
            background:#222200;
            border-top:1px solid var(--yellow);
            display:flex;
            justify-content:space-between;
            align-items:center;
        }
        .ch-info h2 {
            font-family:'Orbitron';
            font-size:16px;
            margin:0;
            color:#fff;
            white-space:nowrap;
            overflow:hidden;
            text-overflow:ellipsis;
        }
        .live-badge {
            background:#ff4444;
            color:#fff;
            padding:1px 5px;
            font-size:10px;
            border-radius:2px;
            animation:blink 1s infinite;
            margin-right:5px;
            vertical-align:middle;
        }
        #watermark {
            font-family:'Orbitron';
            border:1px solid var(--yellow);
            padding:2px 8px;
            font-size:12px;
            opacity:0.8;
            color:var(--yellow);
        }

        /* LIST SECTION */
        .list-wrap {
            display:flex;
            flex-direction:column;
            border:1px solid var(--yellow);
            background:var(--panel);
            overflow:hidden;
            height:100%;
        }
        .marquee {
            background:#111100;
            color:#ffcc00;
            padding:5px;
            font-size:14px;
            border-bottom:1px solid #444400;
            white-space:nowrap;
            overflow:hidden;
        }

        .cat-bar {
            background:#0a0a00;
            padding:8px;
            overflow-x:auto;
            white-space:nowrap;
            border-bottom:1px solid #333300;
            scrollbar-width:none;
            flex-shrink:0;
        }
        .cat-bar::-webkit-scrollbar {
            display:none;
        }
        .cat-btn {
            background:transparent;
            color:#888800;
            border:1px solid #444400;
            padding:5px 12px;
            margin-right:5px;
            cursor:pointer;
            font-size:14px;
            font-family:'Orbitron';
            border-radius:4px;
        }
        .cat-btn.active {
            color:#000;
            background:var(--yellow);
            font-weight:bold;
            border-color:var(--yellow);
        }

        .list-items {
            overflow-y:auto;
            flex:1;
            padding:0;
        }
        .item {
            display:flex;
            align-items:center;
            padding:12px 10px;
            border-bottom:1px solid #333300;
            cursor:pointer;
            transition:0.2s;
        }
        .item:hover {
            background:rgba(255,215,0,0.1);
        }
        .item.active {
            background:rgba(255,215,0,0.2);
            border-left:4px solid var(--yellow);
        }
        .c-icon {
            width:40px;
            height:40px;
            background:#fff;
            margin-right:12px;
            object-fit:contain;
            border-radius:4px;
            border:1px solid #666600;
            flex-shrink:0;
        }
        .c-txt-icon {
            width:40px;
            height:40px;
            background:#111100;
            color:var(--yellow);
            border:1px solid var(--yellow);
            display:grid;
            place-items:center;
            margin-right:12px;
            font-weight:bold;
            flex-shrink:0;
        }
        .c-meta {
            flex:1;
            overflow:hidden;
        }
        .c-name {
            font-weight:bold;
            font-size:16px;
            white-space:nowrap;
            overflow:hidden;
            text-overflow:ellipsis;
            color:#ffcc00;
        }
        .c-cat {
            font-size:11px;
            color:#888800;
        }

        /* FOOTER */
        footer {
            flex-shrink:0;
            background:#111100;
            border-top:1px solid var(--yellow);
            padding:5px 10px;
            font-size:12px;
            display:flex;
            justify-content:space-between;
            align-items:center;
            color:#888800;
        }

        /* MOBILE LAYOUT */
        @media(max-width: 900px) {
            body {
                height: 100vh;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }
            header {
                padding: 8px 10px;
            }
            .logo {
                font-size: 20px;
            }
            .search {
                width: 120px;
                padding: 4px 8px;
                font-size: 14px;
            }
            .search:focus {
                width: 140px;
            }

            .container {
                display: flex;
                flex-direction: column;
                padding: 0;
                gap: 0;
                flex: 1;
                overflow: hidden;
            }
            .player-wrap {
                border: none;
                border-bottom: 2px solid var(--yellow);
                height: auto;
                flex-shrink: 0;
                border-radius: 0;
            }
            .list-wrap {
                border: none;
                border-radius: 0;
                flex: 1;
                height: auto;
            }
            .info-bar {
                padding: 8px;
            }
            .ch-info h2 {
                font-size: 14px;
            }
            .item {
                padding: 12px 15px;
            }
            .cat-btn {
                padding: 6px 14px;
                font-size: 13px;
            }
            footer {
                display: none;
            }
        }

        ::-webkit-scrollbar {
            width:4px;
            background:#111100;
        }
        ::-webkit-scrollbar-thumb {
            background:var(--yellow);
        }
        @keyframes blink {
            50% { opacity:0.5; }
        }
    </style>
</head>
<body oncontextmenu="return false;">

<header>
    <div class="logo" onclick="location.reload()">PAID IPTV BD</div>
    <div class="search-wrap"><input type="text" class="search" placeholder="SEARCH..." onkeyup="search(this.value)"></div>
</header>

<div class="container">
    <!-- PLAYER -->
    <div class="player-wrap" id="playerTarget">
        <div class="video-container">
            <div class="aspect-ratio">
                <video-js id="vid" class="video-js vjs-big-play-centered" controls preload="auto" playsinline data-setup='{"fluid":true}'></video-js>
            </div>
        </div>
        <div class="info-bar">
            <div class="ch-info">
                <h2><span class="live-badge">ON</span> <span id="chName">SELECT CHANNEL</span></h2>
            </div>
            <div id="watermark">PAID IPTV BD</div>
        </div>
    </div>

    <!-- LIST -->
    <div class="list-wrap">
        <marquee class="marquee" id="noticeText" scrollamount="4">WELCOME TO BD PAID IPTV BD - BDIX WEBPLAY</marquee>
        <div class="cat-bar" id="catMenu">
            <button class="cat-btn active" onclick="setCat('All')">ALL</button>
        </div>
        <div class="list-items" id="chList"></div>
    </div>
</div>

<footer>
    <span>© PAID IPTV BD 2018-2026 All right Reserved</span>
    <span>WEBSITE BUIILD <span style="color:var(--yellow)">THE FUTURE</span></span>
</footer>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script src="channels.js"></script>

<script>
const db = {
  "notice":"WELCOME TO BD PAID IPTV BD - BDIX WEBPLAY",
  "watermark_text":"BDIX - PAID IPTV BD",
  "watermark_color":"#FFD700",
  "channels": window.channels || []
};
        
    
    const player = videojs('vid', {
        html5: {
            hls: {
                overrideNative: true
            }
        }
    });

    // --- AUTO ROTATE LOGIC ---
    player.on('fullscreenchange', function() {
        if (player.isFullscreen()) {
            if (screen.orientation && screen.orientation.lock) {
                screen.orientation.lock('landscape').catch((e)=>{});
            }
        } else {
            if (screen.orientation && screen.orientation.unlock) {
                screen.orientation.unlock();
            }
        }
    });

    player.on('error', function() {
        const errorDisplay = player.errorDisplay;
        errorDisplay.el().setAttribute('data-content', '⛔ CHANNEL OFFLINE OR GEOLOCKED');
        document.querySelector('.vjs-loading-spinner').style.display = 'none';
    });

    function init() {
        document.getElementById('noticeText').innerText = db.notice || "WELCOME";
        if(db.watermark_text) {
            const wm = document.getElementById('watermark');
            wm.innerText = db.watermark_text;
            wm.style.color = db.watermark_color;
            wm.style.borderColor = db.watermark_color;
        }

        const cats = new Set(db.channels.map(c => c.group || 'Others'));
        const menu = document.getElementById('catMenu');
        Array.from(cats).sort().forEach(c => {
            const btn = document.createElement('button');
            btn.className = 'cat-btn';
            btn.innerText = c;
            btn.onclick = () => setCat(c);
            menu.appendChild(btn);
        });

        render(db.channels);
        if(db.channels.length > 0) play(db.channels[0]);
    }

    function render(list) {
        const el = document.getElementById('chList');
        el.innerHTML = '';
        if(list.length===0) {
            el.innerHTML = '<p style="padding:20px;text-align:center;">NO CHANNELS</p>';
            return;
        }

        list.forEach(c => {
            const div = document.createElement('div');
            div.className = 'item';
            const logo = c.logo ? `<img src="${c.logo}" class="c-icon" onerror="this.nextElementSibling.style.display='grid';this.style.display='none'">` : '';
            const txtIcon = `<div class="c-txt-icon" style="display:${c.logo?'none':'grid'}">${c.icon}</div>`;

            div.innerHTML = `
                ${logo}
                ${txtIcon}
                <div class="c-meta" onclick="playChannel('${c.url}', '${c.name.replace(/'/g, "\\'")}', this)">
                    <div class="c-name">${c.name}</div>
                    <div class="c-cat">${c.group}</div>
                </div>
            `;
            el.appendChild(div);
        });
    }

    function playChannel(url, name, el) {
        document.getElementById('chName').innerText = name;
        let type = url.includes('.mp4') ? 'video/mp4' : 'application/x-mpegURL';
        player.src({ src: url, type: type });
        player.play().catch(()=>{});

        player.error(null);

        if(el) {
            document.querySelectorAll('.item').forEach(i=>i.classList.remove('active'));
            el.parentElement.classList.add('active');
        }
        if(window.innerWidth < 900) {
            document.getElementById('playerTarget').scrollIntoView({behavior:'smooth'});
        }
    }

    function play(c) {
        playChannel(c.url, c.name, document.querySelector('.item'));
    }

    function setCat(cat) {
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.toggle('active', b.innerText === cat));
        render(cat === 'All' ? db.channels : db.channels.filter(c => c.group === cat));
    }

    function search(t) {
        render(db.channels.filter(c => c.name.toLowerCase().includes(t.toLowerCase())));
    }

    init();
</script>
</body>
</html>
